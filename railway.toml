[build]
builder = "NIXPACKS"
# Use npm explicitly - bun.lockb has been removed
buildCommand = "npm install && npm run build"

[deploy]
# Start the Express server (serves both API and potentially static files)
startCommand = "npm run server"
# Healthcheck configuration
healthcheckPath = "/api/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Environment
[env]
NODE_ENV = "production"

